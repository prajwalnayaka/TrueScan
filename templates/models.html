{% extends 'base.html' %}
{% block title %}Our AI Models{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold">Meet the Ensemble</h1>
        <p class="fs-5 text-muted">The three AI models powering TrueScan's analysis engine.</p>
    </div>

    <div class="row g-5">
        <!-- Left Column: Model Information Cards -->
        <div class="col-lg-5">
            <!-- This row/column structure ensures all cards in this column have the same height -->
            <div class="row g-4">
                {% for model in models %}
                <div class="col-12">
                    <!-- The h-100 class makes the card fill its container's height -->
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h4 class="card-title text-light mb-2">{{ model.name }}</h4>
                            <p class="text-primary fw-bold mb-3">{{ model.type }}</p>
                            <p class="card-text text-muted">{{ model.description }}</p>
                            <p class="card-text text-muted">{{ model.details }}</p>
                            <p class="card-text text-muted">{{ model.release }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Right Column: Performance Graphs -->
        <div class="col-lg-7">
            <div class="d-flex flex-column gap-4">
                <!-- First Graph Card: Training Time -->
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title text-center mb-3">Training Time Comparison</h5>
                        <div style="height: 250px;">
                            <canvas id="trainingTimeChart"></canvas>
                        </div>
                    </div>
                </div>
                <!-- Second Graph Card: Precision & Recall -->
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title text-center mb-3">Model Evaluation Metrics</h5>
                        <div style="height: 250px;">
                           <canvas id="evaluationMetricsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {

    // --- Chart 1: Training Time ---
    const ctxTraining = document.getElementById('trainingTimeChart').getContext('2d');
    new Chart(ctxTraining, {
        type: 'bar',
        data: {
            labels: ['YOLOv8-cls', 'ResNet50', 'VGG19_BN'],
            datasets: [{
                label: 'Training Time (Minutes)',
                data: [2.45, 28.39, 41.22],
                backgroundColor: 'rgba(185, 28, 28, 0.6)', // var(--color-primary) with opacity
                borderColor: 'rgba(185, 28, 28, 1)',
                borderWidth: 2,
                borderRadius: 5,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                title: {
                    display: true,
                    text: 'Time to Train Each Model',
                    color: '#ffffff'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Time (minutes)',
                        color: '#c8c8c8'
                    },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                    ticks: { color: '#c8c8c8' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#ffffff' }
                }
            }
        }
    });

    // --- Chart 2: Precision & Recall ---
    const ctxEvaluation = document.getElementById('evaluationMetricsChart').getContext('2d');
    new Chart(ctxEvaluation, {
        type: 'bar',
        data: {
            labels: ['YOLOv8-cls', 'ResNet50', 'VGG19'],
            datasets: [
                {
                    label: 'Precision',
                    data: [100.0, 100.0, 100.0], // Placeholder data
                    backgroundColor: 'rgba(220, 38, 38, 0.7)', // var(--color-primary-light)
                    borderColor: 'rgba(220, 38, 38, 1)',
                    borderWidth: 2,
                    borderRadius: 5,
                },
                {
                    label: 'Recall',
                    data: [100.0, 100.0, 100.0], // Placeholder data
                    backgroundColor: 'rgba(252, 165, 165, 0.7)', // A lighter, complementary red
                    borderColor: 'rgba(252, 165, 165, 1)',
                    borderWidth: 2,
                    borderRadius: 5,
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                    labels: { color: '#c8c8c8' }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                        display: true,
                        text: 'Score (%)',
                        color: '#c8c8c8'
                    },
                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                    ticks: { color: '#c8c8c8' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#ffffff' }
                }
            }
        }
    });
});
</script>
{% endblock %}

